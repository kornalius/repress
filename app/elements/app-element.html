<link rel="import" href="theme.html">
<link rel="import" href="sounds-element.html">
<link rel="import" href="story-element.html">
<link rel="import" href="stats-element.html">
<link rel="import" href="inventory-element.html">

<dom-module id="app-element">

  <template>
    <style include="app-theme">
      :host {
        display: block;
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        overflow: hidden;
      }
      #container {
        height: 100%;
      }
      /* #container:before {
        content : '';
        display: block;
        position: absolute;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        z-index: 4010;
        background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
        background-size: 100% 4px;
        background-repeat: repeat-y;
        opacity: .14;
        box-shadow : inset 0px 0px 80px 80px rgba(0, 0, 0, .5);
        animation: flicker 0.15s infinite;
      } */
      .overlay {
        z-index: 4100;
      }
      .overlay:before {
        content: '';
        position: absolute;
        left: 0;
        width: 100%;
        height: 25%;
        background : #fff;
        background: linear-gradient(to bottom, rgba(0,0,0,0) 0%, rgba(255,250,250,1) 50%, rgba(255,255,255,0.98) 51%,rgba(255,0,0,0) 100%);
        opacity : .025;
        animation: vline 4.25s linear infinite;
      }
      .overlay:after {
        display: block;
        position: absolute;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        box-shadow: 0 2px 6px rgba(25,25,25,0.2),
                    inset 0 1px rgba(50,50,50,0.1),
                    inset 0 3px rgba(50,50,50,0.05),
                    inset 0 3px 8px rgba(64,64,64,0.05),
                    inset 0 -5px 10px rgba(25,25,25,0.1);
      }

      @keyframes vline {
        0%   { top: -25%}
        100% { top: 100%;}
      }
      @keyframes flicker {
        0%   { opacity: 0.27861; }
        5%   { opacity: 0.34769; }
        10%  { opacity: 0.23604; }
        15%  { opacity: 0.90626; }
        20%  { opacity: 0.18128; }
        25%  { opacity: 0.83891; }
        30%  { opacity: 0.65583; }
        35%  { opacity: 0.67807; }
        40%  { opacity: 0.26559; }
        45%  { opacity: 0.84693; }
        50%  { opacity: 0.96019; }
        55%  { opacity: 0.08594; }
        60%  { opacity: 0.20313; }
        65%  { opacity: 0.71988; }
        70%  { opacity: 0.53455; }
        75%  { opacity: 0.37288; }
        80%  { opacity: 0.71428; }
        85%  { opacity: 0.70419; }
        90%  { opacity: 0.7003; }
        95%  { opacity: 0.36108; }
        100% { opacity: 0.24387; }
      }
    </style>

    <sounds-element id="sounds"></sounds-element>

    <div id="container" class="layout horizontal">

      <!-- <div class="overlay"></div> -->

      <story-element class="flex-8"></story-element>

      <div class="layout vertical flex-4">

        <stats-element class="flex-4"></stats-element>

        <inventory-element class="flex-8"></inventory-element>

      </div>

    </div>

  </template>

  <script>
    class AppElement extends Polymer.Element {

      static get is() { return 'app-element'; }

      static get properties () {
        return {
          data: {
            type: Object,
            value: () => {},
          },
        }
      }

      ready () {
        super.ready()

        this.sounds = this.$.sounds

        window.Repress = {}
        window.Repress.app = this
      }

    }

    customElements.define(AppElement.is, AppElement);
  </script>

</dom-module>
